PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX msg: <http://purl.org/webofneeds/message#>
PREFIX won: <http://purl.org/webofneeds/model#>
PREFIX agr: <http://purl.org/webofneeds/agreement#>
PREFIX mod: <http://purl.org/webofneeds/modification#> 

SELECT distinct ?msg ?direction ?msgType ?senderNeed ?retracts ?accepts ?proposes ?proposesToCancel ?previous ?correspondingRemoteMessage ?responseTo ?remoteResponseTo WHERE {
 {

 GRAPH <urn:x-arq:UnionGraph> {
   OPTIONAL {
    ?msg msg:hasSenderNeed ?senderNeed.
   }
   OPTIONAL {
    ?msg msg:hasMessageType ?msgType.
   }
   OPTIONAL {
    ?msg msg:hasPreviousMessage ?previous.
   }
   OPTIONAL {
    ?msg msg:isResponseTo ?responseTo.
   }
   OPTIONAL {
    ?msg msg:isRemoteResponseTo ?remoteResponseTo.
   }
   OPTIONAL {
    ?msg msg:hasCorrespondingRemoteMessage ?correspondingRemoteMessage.
   }
   OPTIONAL {
    ?msg agr:proposes ?proposes.
   }
   OPTIONAL {
    ?msg agr:proposesToCancel ?proposesToCancel.
   }
   OPTIONAL {
    ?msg agr:accepts ?accepts.
   }
   OPTIONAL {
    ?msg mod:retracts ?retracts.
   }
 }
 }  
} 