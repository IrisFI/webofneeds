PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX msg: <http://purl.org/webofneeds/message#>
PREFIX won: <http://purl.org/webofneeds/model#>
SELECT ?g ?s ?p ?o WHERE {

     GRAPH ?g {
         ?msg ?p ?o .
     }

    GRAPH <urn:x-arq:UnionGraph> { 
        ?terminatinggraph  msg:hasPreviousMessage* ?msg .
         ?msg msg:hasPreviousMessage* ?mid .
         ?mid msg:hasPreviousMessage+ ?first .
     }  

     FILTER NOT EXISTS {?first msg:hasPreviousMessage ?none}  

     BIND(?msg as ?s)

} 