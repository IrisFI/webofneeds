

# This example is taken from http://shacl.org/playground and
# transformed to trig, putting shapes, data and validation results in separate graphs
#
# Test case: Property path instead of address shape. The address properties are not extracted.


@prefix dash: <http://datashapes.org/dash#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <http://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ex: <http://example.org/ns#> .

ex:shapes {
schema:PersonShape
    a sh:NodeShape ;
    sh:targetClass schema:Person ;
    sh:property [
        sh:path schema:givenName ;
        sh:datatype xsd:string ;
        sh:name "given name" ;
    ] ;
    sh:property [
        sh:path schema:birthDate ;
        sh:lessThan schema:deathDate ;
        sh:maxCount 1 ;
    ] ;
    sh:property [
        sh:path schema:gender ;
        sh:in ( "female" "male" ) ;
    ] ;
    sh:property [
        sh:path ( schema:address schema:streetAddress );
        sh:datatype xsd:string ;
    ] ;
	sh:property [
        sh:path ( schema:address schema:postalCode );
        sh:or ( [ sh:datatype xsd:string ] [ sh:datatype xsd:integer ] ) ;
        sh:minInclusive 10000 ;
        sh:maxInclusive 99999 ;
    ] .

}


ex:data {

ex:Bob
    a schema:Person ;
    schema:givenName "Robert" ;
    schema:familyName "Junior" ;
    schema:birthDate "1971-07-07"^^xsd:date ;
    schema:deathDate "1998-09-10"^^xsd:date ;
	schema:birthPlace ex:Paris ;
    schema:address ex:BobsAddress .

ex:BobsAddress
    schema:streetAddress "1600 Amphitheatre Pkway" ;
    schema:postalCode 19404 .

ex:Paris a schema:Place;
	schema:name "Paris"@en;
	schema:name "Paris"@fr;
	schema:name "Paris"@de.

ex:Alice
    a schema:Person ;
    schema:givenName "Alice" ;
    schema:familyName "McAllister" ;
    schema:birthDate "1951-01-02"^^xsd:date ;
    schema:deathDate "1978-09-10"^^xsd:date ;
	schema:birthPlace ex:London ;
    schema:address ex:AlicesAddress .

ex:AlicesAddress
    schema:streetAddress "Downing Street 10" ;
    schema:postalCode 230011 .

}


ex:result {
[
	a sh:ValidationResult ;
	sh:resultSeverity sh:Violation ;
	sh:sourceConstraintComponent sh:MaxInclusiveConstraintComponent ;
	sh:sourceShape _:t49 ;
	sh:focusNode ex:Alice ;
	sh:value 230011 ;
	sh:resultPath _:t60 ;
	sh:resultMessage "Value is not <= 99999" ;
] .

}