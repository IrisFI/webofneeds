<!--
  ~ Copyright 2012  Research Studios Austria Forschungsges.m.b.H.
  ~
  ~    Licensed under the Apache License, Version 2.0 (the "License");
  ~    you may not use this file except in compliance with the License.
  ~    You may obtain a copy of the License at
  ~
  ~        http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~    Unless required by applicable law or agreed to in writing, software
  ~    distributed under the License is distributed on an "AS IS" BASIS,
  ~    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~    See the License for the specific language governing permissions and
  ~    limitations under the License.
  -->

<div style="padding-top: 40px;padding-bottom: 8em;" xmlns="http://www.w3.org/1999/html">
	<div ng-show="showPublic()">
		<div style="font-size: 1.8em; text-align: center ;">
			<strong>Postbox</strong>
		</div>

		<div class="row"></br></div>

		<div class="col-md-4 col-md-offset-4">
			<input class="form-control" type="search" ng-model="search.$" style="padding-right: 30px;"/>
            <span class="glyphicon glyphicon-search" style="position: absolute;right: 0;padding: 8px 27px;"></span>
		</div>

		<div class="row"></br></br></br></div>

		<div>
            <!--Inbox-->
            <div ng-controller="PostInboxCtrl">
                <inbox-table items="allNeeds" collapsed="true" click-on-item="clickOnPost" type="inbox"
                             has-items="hasPosts()" control-data="postData"
                             template-url="{{templateUrl}}"></inbox-table>
            </div>

            <div ng-controller = "DraftCtrl">
                <remove-control-data text="Do you really want to delete chosen draft?"
                                     remove-item="removeDraft(draftURI)"
                                     display-confirmation="displayConfirmation"
                                     chosen-item="draftData"></remove-control-data>
                <inbox-table items="allDrafts" collapsed="true" click-on-item="clickOnDraft()" type="Drafts"
                             remove-item="clickOnRemoveButton(draft)" has-items="hasDrafts()"
                             control-data="draftData" template-url="{{templateUrl}}">
                </inbox-table>
            </div>


            <!--Closed-->
            <div id="closedCollapse" class="well div-table col-lg-12">
                <div class="div-table-row">
                    <div class="div-table-cell pull-left additional-info-title text-center">Closed</div>
                    <div class="div-table-cell pull-right">
                        <span >
                            <a href="" ng-show="closedCollapsed" class="glyphicon glyphicon-chevron-down"
                               ng-click="closedCollapseClick()"></a>
                        </span>
                        <span >
                            <a href="" ng-show="!closedCollapsed" class="glyphicon glyphicon-chevron-up"
                               ng-click="closedCollapseClick()"></a>
                        </span>
                    </div>
                </div>
            </div>
            <div id="closedArea" ng-show="!closedCollapsed" class="div-table col-lg-12">
                <table id="closed-table" st-table="closedList" class="table table-hover table-striped">
                    <thead>
                    <tr>
                        <th st-sort="type">Type</th>
                        <th st-sort="type">Title</th>
                        <th st-sort="datetime">
                            Closed on
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr ng-show="closedList.length>0" ng-repeat="closed in closedList | filter: search">
                            <td class="col-lg-1">
                                <span style="display: none;">{{closed.type}}</span>
                                <img ng-src="{{getTypePicURI(closed.type)}}"
                                     tooltip="{{closed.type}} (click to filter)"/>
                            </td>
                            <td>{{closed.title}}</a></td>
                            <td>{{closed.datetime | date}}</td>
                        </tr>
                        <tr ng-show="closedList.length<1">
                            <td class="col-lg-1">
                            </td>
                            <td>You don't have closed posts yet. </td>
                            <td>
                            </td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
		</div>
	</div>
</div>